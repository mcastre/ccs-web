<div id="view_budget" class="view-wrapper" ng-controller="BudgetCtrl as budget">
  <aside class="projects-sidebar hide-for-small-only">
    <h2 class="sidebar-title">Projects</h2>
    <a href="" class="button sidebar-button">Add New Project</a>
    <ul class="no-bullet sidebar-nav" role="menu">
      <li ng-repeat="proj in project.allProjects">
        <a href="" role="menuitem" ui-sref="project({id: proj.$id})">{{proj.name}}</a>
      </li>
    </ul>
  </aside>
  <section class="project-view-pane grid-block wrap">
    <div class="small-12 medium-6 grid-block details-list" ng-repeat="(name, job) in budget.allJobs">
      <article class="card">
        <div class="card-divider">
          <span class="card-title-small">{{job.name}}</span><h3 class="card-stat"></h3>
        </div>
        <div class="card-section">
          <div class="grid-block" ng-if="job.Budget">
            <div class="large-3 grid-content">
              <p class="card-col-header"># Invoice</p>
            </div>
            <div class="large-6 grid-content">
              <p class="card-col-header">Item Name</p>
            </div>
            <div class="large-3 grid-content">
              <p class="card-col-header align-right">Price</p>
            </div>
          </div>
          <ul class="no-bullet">
            <li ng-repeat="expense in job.Budget">
              <div class="grid-block">
                <div class="large-3 grid-content">
                  <p>#{{expense.ticketNum}}</p>
                </div>
                <div class="large-6 grid-content">
                  <p>{{expense.item}}</p>
                </div>
                <div class="large-3 grid-content">
                  <p class="text-right">{{expense.price | currency}}</p>
                </div>
              </div>
            </li>            
          </ul>
          <form ng-submit="budget.addExpense(name)" ng-show="toggleAddExpense">
            <div class="grid-block">
              <div class="small-12 large-3 grid-content">
                <label>
                  <input type="text" ng-model="budget.newExpense.ticketNum" placeholder="# Ticket">
                </label>
              </div>
              <div class="small-12 large-6 grid-content">
                <label>
                  <input type="text" ng-model="budget.newExpense.item" placeholder="Item Name">
                </label>
              </div>
              <div class="small-12 large-3 grid-content">
                <label>
                  <input type="text" ng-model="budget.newExpense.price" placeholder="Price">
                </label>
              </div>
            </div>
            <div class="grid-block">
              <div class="grid-content">
                <button role="button" type="submit" class="button">Submit</button>
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer">
          <a href="" ng-click="toggleAddExpense = !toggleAddExpense">
            <span ng-if="!toggleAddExpense">Add Expense</span>
            <span ng-if="toggleAddExpense">Finished Adding</span>
          </a>
        </div>
      </article>
    </div>
  </section>
  <aside class="projects-sidebar show-for-small-only">
    <h2 class="sidebar-title">Projects</h2>
    <a href="" class="button sidebar-button">Add New Project</a>
    <ul class="no-bullet sidebar-nav" role="menu">
      <li ng-repeat="proj in project.allProjects">
        <a href="" role="menuitem" ui-sref="project({id: proj.$id})">{{proj.name}}</a>
      </li>
    </ul>
  </aside>
</div>
